# 환경변수

DB_USER
DB_PASSWORD
SECRET_KEY

SQL_USERNAME
SQL_PASSWORD
SQL_HOST

# API 명세서 URL

https://docs.google.com/spreadsheets/d/1hqUvo8AOAh7fhMWBZG2gXZIKR8A1w3PWymmsV67ePUU/edit?usp=sharing

# ERD URL

- <iframe width="600" height="336" src="https://www.erdcloud.com/p/7aCAfEWrSDJjR8Mrn" frameborder="0" allowfullscreen></iframe>

# 더 고민해 보기

1. **암호화 방식**

- 비밀번호를 DB에 저장할 때 Hash를 이용했는데, Hash는 `단방향 암호화`와 `양방향 암호화` 중 어떤 암호화 방식에 해당할까요?
  단방향 암호화 방식

- 비밀번호를 그냥 저장하지 않고 Hash 한 값을 저장 했을 때의 좋은 점은 무엇인가요?
  보안을 강화할 수 있다

2. **인증 방식**

- JWT(Json Web Token)을 이용해 인증 기능을 했는데, 만약 Access Token이 노출되었을 경우 발생할 수 있는 문제점은 무엇일까요?
  인증 정보를 서버 측에서 갖지 않기 때문에 토큰을 expire 할 방법이 없다.

- 해당 문제점을 보완하기 위한 방법으로는 어떤 것이 있을까요?
  refresh token이 유출된 경우엔 서버가 직접 expire 할 수 있다.
  Refresh Token을 활용해 OTP 인증처럼 짧은 시간 동안에만 사용할 수 있도록 하고 주기적으로 재발급받도록 하여 토큰이 유출되더라도 그 피해를 최소화한다.

3. **인증과 인가**

- 인증과 인가가 무엇인지 각각 설명해 주세요.
  인증이란 사용자의 신원을 검증하는 프로세스를 뜻한다. 가장 간단한 예시로는 ID와 PW를 통해 로그인하는 행위
  인가는 인증 이후의 프로세스입니다. 인증된 사용자가 어떠한 자원에 접근할 수 있는지를 확인하는 절차를 인가라고 함

- 과제에서 구현한 Middleware는 인증에 해당하나요? 인가에 해당하나요? 그 이유도 알려주세요.
  인증에 해당한다고 생각한다. 사용자가 입력한 로그인 정보가 정확한지 검증하는 코드이기 때문이다.

4. **Http Status Code**

- 과제를 진행하면서 `사용한 Http Status Code`를 모두 나열하고, 각각이 `의미하는 것`과 `어떤 상황에 사용`했는지 작성해 주세요.
  200 : 요청 정상처리시
  201 : 유저생성, 상품작성, 상품수정 정상처리시
  400 : 유저가 정보를 잘못 입력한 경우
  404 : 조회된 내용이 없는 경우
  500 : 서버오류

5. **리팩토링**

- MongoDB, Mongoose를 이용해 구현되었던 코드를 MySQL, Sequelize로 변경하면서, 많은 코드 변경이 있었나요? 주로 어떤 코드에서 변경이 있었나요?
  모델 코드에서 변경이 많은편이었다. 인증기능을 만들기 위해 유저정보 생성과 join을 위한 추가 코드 작성 등이 있었고
  해당 모델과 라우트 파일을 연결하는 과정에서도 코드 변화가 있었습니다.

- 만약 이렇게 DB를 변경하는 경우가 또 발생했을 때, 코드 변경을 보다 쉽게 하려면 어떻게 코드를 작성하면 좋을 지 생각나는 방식이 있나요? 있다면 작성해 주세요.
  처음 만드는 것이다 보니 미리 설계를 하는게 좋겠다가도 구현이 우선시 되어 아쉬웠다.
  앞으로 설계 당시에 디비 변경을 감안하여 어떤 디비와도 연동이 될 수 있게(디비 변경 시 어떤 코드나 변수가 달라질수 있는지를 생각하며) 공통되는 부분을 최대한 많이 확보할 수 있는 코드를 짜도록 노력해야겠다.

6. **서버 장애 복구**

- 현재는 PM2를 이용해 Express 서버의 구동이 종료 되었을 때에 Express 서버를 재실행 시켜 장애를 복구하고 있습니다. 만약 단순히 Express 서버가 종료 된 것이 아니라, AWS EC2 인스턴스(VM, 서버 컴퓨터)가 재시작 된다면, Express 서버는 재실행되지 않을 겁니다. AWS EC2 인스턴스가 재시작 된 후에도 자동으로 Express 서버를 실행할 수 있게 하려면 어떤 조치를 취해야 할까요?
  (Hint: PM2에서 제공하는 기능 중 하나입니다.)

위의 경우 원인은 ec2 인스턴스 보안 그룹 포트 인바운드 규칙 때문이다.
ec2 재부팅을 한 이후 내 ip는 달라질 수 있다.
이를 해결하기 위해 aws에서 제공하는 기능이 탄력적 IP 주소 할당이다. 서버에 고정 ip를 설정해주는 것이다.

7. **개발 환경**

- nodemon은 어떤 역할을 하는 패키지이며, 사용했을 때 어떤 점이 달라졌나요?
  파일들을 모니터링하고 있다가 수정될 경우 자동으로 서버를 재실행시켜주는 스크립트 모니터링 유틸리티이다
  파일을 수정하고 반영 내용을 확인하기 위해 수시로 서버를 껐다 키는 것을 반복했는데 해당 패키지를 이용하면서 서버가 자동 재실행되어 편리해졌다.

- npm을 이용해서 패키지를 설치하는 방법은 크게 일반, 글로벌(`--global, -g`), 개발용(`--save-dev, -D`)으로 3가지가 있습니다. 각각의 차이점을 설명하고, nodemon은 어떤 옵션으로 설치해야 될까요?

일반: 설치 옵션에 아무것도 넣지 않은 패키지는 package.json의 dependencies에 등록됨. cookie-parser, nunjucks 등 배포시 사용자들이 볼 화면로직 등과 직접적으로 관련된 경우
개발용(`--save-dev, -D`): 설치 옵션으로 -D를 넣은 경우에는 해당 라이브러리가 package.json의 devDependencies에 등록됨. nodemon 같이 개발을 도와주나 실제 배포시 사용자가 사용할 기능과 관련 없는 패키지들을 개발용으로 설치한다
글로벌(`--global, -g`): 시스템 레벨에서 사용할 자바스크립트 라이브러리를 설치할 때 사용
